<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:v-on="http://www.w3.org/1999/xhtml">

<head th:include="fragmentos/head :: head" th:remove="tag"/>
<title>Bolsa de Trabajo</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0">
<body>
<div class="site-wrapper" id="app">
    <header class="header header-menu-fullw">

        <div th:include="fragmentos/menu :: menu" th:remove="tag"></div>

    </header>


    <div class="main" role="main">

        <div th:include="fragmentos/heading :: heading('Agregar habilidades')"></div>


        <!-- Page Content -->
        <section class="page-content">
            <div class="container">

                <div class="row">
                    <div class="col-md-8 col-md-offset-2">
                        <!-- Job Form -->
                        <form  th:object="${skill}" th:o method="post" id="submit-skill-form" class="job-manager-form"
                               v-on:submit.prevent="onSubmit">

                            <!-- Book Information Fields -->
                            <fieldset class="fieldset-skill_title">
                                <label for="skill_title">Título</label>
                                <div class="field">
                                    <input type="text"  class="form-control" v-model="titulo"
                                           name="skill_title" id="skill_title" placeholder="Facilidad de aprendizaje" />
                                </div>
                            </fieldset>

                            <fieldset class="fieldset-skill_code">
                                <label for="skill_code">Código</label>
                                <div class="field">
                                    <input type="text"  class="form-control" v-model="codigo"
                                           name="skill_code" id="skill_code" placeholder="FA12" />
                                </div>
                            </fieldset>

                            <label>Categorias</label>
                            <v-select :options="listacategorias"></v-select>

                            <div class="spacer"></div>

                            <p>
                                <input type="submit" name="submit_skill" class="btn btn-primary" value="Agregar &rarr;" />
                            </p>

                        </form>
                        <!-- Job Form / End -->
                    </div>
                </div>

            </div>
        </section>
        <!-- Page Content / End -->

        <div th:include="fragmentos/footer :: footer"></div>
    </div>
</div>


<div th:include="fragmentos/scripts :: scripts" ></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.16.0/axios.js" th:src="@{https://cdnjs.cloudflare.com/ajax/libs/axios/0.16.0/axios.js}"></script>
<script src="https://unpkg.com/vue" th:src="@{https://unpkg.com/vue}"></script>
<script src="https://unpkg.com/vue-select@latest"></script>
<script th:inline="javascript">
    Vue.component('v-select', VueSelect.VueSelect);

    let code = "";
    let title = "";
    new Vue({
        el: "#app",
        data: {
            titulo: title,
            codigo: code,
            listacategorias: [],
        },
        methods: {
            onSubmit: function(){
                axios.post("/skills/create", this.$data)
                    .then(response => alert("success"))
                    .catch(error => {
                    console.log(error.response)
                    })
            }
        },
        mounted: function(){
            axios.get("/skills/names").then(response =>
            {
                console.log(response)
                this.listacategorias = response.data
            }).catch(error => {
                console.log(error.response)
            })
        }
    })

</script>
</body>
</html>